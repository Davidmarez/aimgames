// ==UserScript==
// @name        AIM Enhanced
// @description Improves posting on AIM. Adds partial markdown support and other fun stuff.
// @namespace   notareal@em.ail
// @require     https://code.jquery.com/jquery-3.1.1.min.js
// @require     https://raw.githubusercontent.com/HulaSamsquanch/aimgames/master/enhance/resources/codemirror.js
// @require     https://raw.githubusercontent.com/HulaSamsquanch/aimgames/master/enhance/resources/css.js
// @require     https://raw.githubusercontent.com/HulaSamsquanch/aimgames/master/enhance/resources/xml.js
// @require     https://raw.githubusercontent.com/HulaSamsquanch/aimgames/master/enhance/resources/vbscript.js
// @require     https://raw.githubusercontent.com/HulaSamsquanch/aimgames/master/enhance/resources/javascript.js
// @require     https://raw.githubusercontent.com/HulaSamsquanch/aimgames/master/enhance/resources/htmlmixed.js
// @require     https://raw.githubusercontent.com/HulaSamsquanch/aimgames/master/enhance/resources/bbcode.js
// @require     https://raw.githubusercontent.com/HulaSamsquanch/aimgames/master/enhance/resources/bbcodemixed.js
// @require     https://raw.githubusercontent.com/HulaSamsquanch/aimgames/master/enhance/resources/opentip-native.js
// @require     https://raw.githubusercontent.com/HulaSamsquanch/aimgames/master/enhance/resources/editorbuttons.js
// @require     https://raw.githubusercontent.com/HulaSamsquanch/aimgames/master/enhance/resources/prism.js
// @require     https://raw.githubusercontent.com/HulaSamsquanch/aimgames/master/enhance/resources/usernamehistory.js
// @require     https://raw.githubusercontent.com/HulaSamsquanch/aimgames/master/enhance/resources/swearifyLite.js
// @resource    codemirrorBaseCSS https://github.com/HulaSamsquanch/aimgames/raw/master/enhance/codemirror-base.css
// @resource    codemirrorThemeCSS https://github.com/HulaSamsquanch/aimgames/raw/master/enhance/codemirror-theme.css
// @resource    prismCSS https://github.com/HulaSamsquanch/aimgames/raw/master/enhance/prism.css
// @include     http://aimgames.forummotion.com/post
// @include     http://aimgames.forummotion.com/post*
// @include     http://aimgames.forummotion.com/t*
// @include     http://aimgames.forummotion.com/f*
// @include     http://aimgames.forummotion.com/
// @version     0.56
// @grant       GM_addStyle
// @grant       GM_log
// @grant       GM_info
// @grant       GM_getResourceText
// @grant       GM_setClipboard
// @grant       unsafeWindow
// @license     MIT License (Expat); opensource.org/licenses/MIT
// @noframes
// ==/UserScript==
'use strict';GM_log(GM_info);GM_addStyle(GM_getResourceText("codemirrorBaseCSS"));GM_addStyle(GM_getResourceText("codemirrorThemeCSS"));GM_addStyle(GM_getResourceText("prismCSS"));var h={};function k(b,e){var c=b.v(),d=c.u();c.H(e,d)}
function m(){var b=n,e=document.createElement("span");buttons.forEach(function(c){if("string"==typeof c){var d=document.createElement("img");d.src=c;d.style="vertical-align:middle";e.appendChild(d)}else{var l=c.id,d=aa(l,c.src,c.m);c.o?d.addEventListener("click",function(){k(b,"["+c.tag+"]")}):d.addEventListener("click",function(){h[l]?(h[l]=!1,k(b,"[/"+c.tag+"]")):(h[l]=!0,k(b,"["+c.tag+"]"))});e.appendChild(d)}e.appendChild(document.createTextNode("\u00a0"))});return e}
function aa(b,e,c){var d=document.createElement("button");d.setAttribute("accesskey",c);d.setAttribute("type","button");d.setAttribute("id",b);d.setAttribute("title","");d.setAttribute("class","button2");b=document.createElement("img");b.setAttribute("src",e);d.appendChild(b);return d}GM_addStyle('\n\npre {\n    max-height: 200px;\n    overflow: auto;\n    /**/\n    color: #ff6913;\n    font-family: Courier,"Courier New","Source Code Pro",monospace;\n    font-size: 11px;\n    /* box */\n    background-color: #000;\n    border: solid 1px #1c1c1c;\n    margin: 0;\n    /* possibly? */\n    margin-left: 60px;\n}\n/* inline code, shit that isnt deprecated in html5 */\nsamp {\n    color: #ff6913;\n    font-family: Courier,"Courier New","Source Code Pro",monospace;\n}\n\n/* clear default bbcode buttons */\n#text_edit, #html_edit, #text_editor_cmd_switchmode, #format-buttons > img, #format-buttons > wbr {\n  display: none !important;\n}\n#format-buttons {\n  padding-bottom: 5px;\n}\n\n/*anotha padding fix*/\n#quick_reply > table > tbody > tr > td > .CodeMirror {\n  margin-top: 5px;\n}\n\n/*tooltip font*/\n.opentip-container {\n  font-family: Verdana,Arial,Helvetica,sans-serif;\n}\n\n/*makes my name be rainbow-y*/\n[href="/u2548"] > span > strong{\n    -webkit-animation: hansencolorRotate 6s linear 0s infinite;\n            animation: hansencolorRotate 6s linear 0s infinite;\n}\n\n@-webkit-keyframes hansencolorRotate {\n    from {\n        color: rgb(255, 0, 0);\n    }\n    16.6% {\n        color: rgb(255, 0, 255);\n    }\n    33.3% {\n        color: rgb(0, 0, 255);\n    }\n    50% {\n        color: rgb(0, 255, 255);\n    }\n    66.6% {\n        color: rgb(0, 255, 0);\n    }\n    83.3% {\n        color: rgb(255, 255, 0);\n    }\n    to {\n        color: rgb(255, 0, 0);\n    }\n}\n\n@keyframes hansencolorRotate {\n    from {\n        color: rgb(255, 0, 0);\n    }\n    16.6% {\n        color: rgb(255, 0, 255);\n    }\n    33.3% {\n        color: rgb(0, 0, 255);\n    }\n    50% {\n        color: rgb(0, 255, 255);\n    }\n    66.6% {\n        color: rgb(0, 255, 0);\n    }\n    83.3% {\n        color: rgb(255, 255, 0);\n    }\n    to {\n        color: rgb(255, 0, 0);\n    }\n}\n\n\n/*slight padding below post buttons for tidiness*/\n.post-options {\n  padding-bottom: 2.5px;\n}\n/*hovering over post buttons*/\n.post-options > a:hover {\n  background-color: #fbfbfb !important;\n  \n  background: -webkit-linear-gradient(top, rgb(201, 31, 31) 0%,rgb(140, 14, 14) 100%) !important;\n  \n  background: linear-gradient(to bottom, rgb(201, 31, 31) 0%,rgb(140, 14, 14) 100%) !important;\n  -o-border-image: linear-gradient(to bottom, rgb(47, 47, 47) 0%,rgb(87, 87, 87) 100%) 1 !important;\n     border-image: -webkit-linear-gradient(top, rgb(47, 47, 47) 0%,rgb(87, 87, 87) 100%) 1 !important;\n     border-image: linear-gradient(to bottom, rgb(47, 47, 47) 0%,rgb(87, 87, 87) 100%) 1 !important;\n}\n/*remove default button imgs*/\n.post-options > a > img {\n  display: none;\n}\n/*remove broken multiquote button*/\n.post-options > img {\n  display: none; \n}\n/*edit button text*/\n.post-options > a[href$="mode=editpost"]:after {\n  display: initial;\n  content: \'edit\';\n}\n/*delete button text*/\n.post-options > a[href$="mode=delete"]:after {\n  display: initial;\n  content: \'x\';\n}\n/*quote button text*/\n.post-options > a[href$="mode=quote"]:after {\n  display: initial;\n  content: \'quote\';\n}\n/*show IP button text*/\n.post-options > a[href^="/modcp?mode=ip"]:after {\n  display: initial;\n  content: \'ip\';\n}\n/*post buttons*/\n.post-options > a {\n  font: 11px Arial, Helvetica, sans-serif;\n  \n  /*! a-shadow: inset 0 1px 0 rgba(255,255,255,.3), 0 1px 0 rgba(0,0,0,.1); */\n\n  position: relative;\n  vertical-align: middle;\n  margin: 0 2px 5px 0;\n  background-color: #940b0b;\n  border: solid 3px #272727;\n\n  background-repeat: no-repeat;\n  background-position: center center;\n  text-indent: -900em;\n  color: #333;\n  text-decoration: none;\n  line-height: 100%;\n  white-space: nowrap;\n  border-radius: 0px;\n\n\n  width: 26px;\n  height: 26px;\n  font-size: 90%;\n\n  visibility: initial;\n  display: initial;\n  padding: 2px 5px;\n  text-align: center;\n  font-size: 75%;\n  /*! margin-bottom: 0; */\n  /*! margin-top: 100px; */\n  \n  /*transition: all 1s ease;*/\n  color: #d0b2b2;\n  text-transform: uppercase;\n  font-weight: bold;\n  background: -webkit-linear-gradient(top, rgb(163, 22, 22) 0%,rgb(105, 10, 10) 100%);\n  background: linear-gradient(to bottom, rgb(163, 22, 22) 0%,rgb(105, 10, 10) 100%);\n  -o-border-image: linear-gradient(to bottom, rgb(20, 20, 20) 0%,rgb(62, 62, 62) 100%) 1;\n     border-image: -webkit-linear-gradient(top, rgb(20, 20, 20) 0%,rgb(62, 62, 62) 100%) 1;\n     border-image: linear-gradient(to bottom, rgb(20, 20, 20) 0%,rgb(62, 62, 62) 100%) 1;\n  /*! border-style: solid; */\n  /*! border-width: 10px; */\n  /*! -webkit-font-smoothing: antialiased; */\n  text-shadow: 1px 1px 1px rgba(0,0,0,0.004);\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  \n  /*could remove i suppose?*/\n  font-size: 60%;\n}\n\n/*tiny fix for bottom categories bar*/\n.catBottom {\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n/*hide the text-footer at the bottom of the screen*/\n#page-footer {\n  display:none;\n}\n\n/*utility class for links*/\n.hansenAnc {\n  cursor: pointer;\n  font-weight: bold;\n  text-decoration: none;\n}\n/*no underline*/\n.hansenAnc:hover {\n  text-decoration: none !important;\n}\n\n/*legacy syntax highlighting CSS*/\n.code {\n  color: #eee;\n}\n.hansen-literal {\n  color: #CC3366 !important;\n}\n.hansen-keyword {\n  color: #33FFFF !important;\n}\n\n/*prismjs \'bug\' fix*/\n/*.language-java {*/\n.cont_code {\n  white-space: pre !important;\n}\n/*style fix*/\n/*.code {*/\n.code:not(.spoiler) {\n  background: #272822 !important;\n}\n\n/* \'image has been scaled to fit screen\' msg */\n/*fitimg is an anchor, that works w/ display:block*/\n.h-fitimg {\n\tbackground-color: #231717;\n    padding-left: 5px;\n    padding-right: 5px;\n    /*width: 99.093%;*/\n\tcursor: pointer;\n\tborder: solid 1px #2F2929; /*chrome and shit*/\n\tborder: solid 1px #2F2929CC; /*modern firefox*/\n    display: block;\n}\n.h-fitimg:hover {\n    text-decoration: none !important;\n}\n/*resize the imgs themselvers*/\n.postbody > div > img {\n  max-width: 100%;\n}\n\n/*remastered icons*/\nimg[src="https://illiweb.com/fa/extremedarkred/navfolder.gif"] {\n\tbackground-image: url(\'http://i.imgur.com/MCyr6Y1.png\');\n\t-o-object-position: -20px 20px;\n\t   object-position: -20px 20px;\n\tbackground-size: cover;\n  margin-right: 2px;\n}\n\nimg[src="https://illiweb.com/fa/extremedarkred/icon_minipost.gif"] {\n  background-image: url(\'http://i.imgur.com/jat1H4q.png\');\n  -o-object-position: -20px 20px;\n     object-position: -20px 20px;\n  background-size: cover;\n  /*margin-right: 2px;*/\n\n  vertical-align: 0px;\n  margin-right: 0px;\n}\n\nimg[src="http://i71.servimg.com/u/f71/14/03/33/42/locked12.gif"] {\n  background-image: url(\'http://i.imgur.com/DXwHC1o.png\'); /*also url(\'http://i.imgur.com/u3StReB.png\');*/\n  -o-object-position: -20px 20px;\n     object-position: -20px 20px;\n  background-size: cover;\n  margin-right: 2px;\n\n  vertical-align: -1px;\n}\n\nimg[src="https://illiweb.com/fa/extremedarkred/icon_minipost_new.gif"] {\n    background-image: url(\'http://i.imgur.com/JLJvZpG.png\');\n    -o-object-position: -20px 20px;\n       object-position: -20px 20px;\n    background-size: cover;\n    /*margin-right: 2px;*/\n\n    vertical-align: 0px;\n    margin-right: 0px;\n}\n\nimg[title][src="http://i59.servimg.com/u/f59/14/03/33/42/catego12.png"] {\n    background-image: url(\'http://i.imgur.com/DumidY4.png\');\n    -o-object-position: -40px 20px;\n       object-position: -40px 20px;\n    background-size: cover;\n    /*margin-right: 2px;*/\n\n    vertical-align: 0px;\n    margin-right: 0px;\n}\n\n/*category title spacing fix*/\n.cattitle {\n    padding-left: 2px;\n}\n\n/*post header size fix*/\n.post > td:last-child > table > tbody > tr:first-child {\n\theight: 23px;\n}\n.post-options > a {\n\tline-height: 18px;\n}\n.inline-code {\n  display: inline !important;\n}\n\n/*bbcode button gradient bg*/\nbutton.button2, input.button2 {\n  /* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#ffffff+0,d3d3d3+7,efefef+100 */\n  background: rgb(255,255,255) !important; /* Old browsers */ /* FF3.6-15 */\n  background: -webkit-linear-gradient(top, rgba(255,255,255,1) 0%,rgba(211,211,211,1) 7%,rgba(239,239,239,1) 100%) !important; /* Chrome10-25,Safari5.1-6 */\n  background: linear-gradient(to bottom, rgba(255,255,255,1) 0%,rgba(211,211,211,1) 7%,rgba(239,239,239,1) 100%) !important; /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr=\'#ffffff\', endColorstr=\'#efefef\',GradientType=0 ) !important; /* IE6-9 */\n}\n\n/*\nuser status and contact buttons in pure css\n*/\n\n@import url(\'https://fonts.googleapis.com/css?family=Open+Sans\');\n/*TODO*/\ntd.row2.messaging.gensmall > table > tbody > tr > td.user-is-online::after {\n  color: #eee;\n  content: "ONLINE";\n  font-family: \'Open Sans\', Arial, sans-serif;;\n  \n  /*font-weight: bold;*/\n  letter-spacing: 0px;\n  -webkit-font-smoothing: antialiased;\n  text-shadow: rgba(0,0,0,.01) 0 0 1px;\n  \n  background: -webkit-linear-gradient(top, rgb(85, 85, 85) 0%, rgb(39, 39, 39) 42%, rgb(11, 11, 11) 96%);\n  background: linear-gradient(to bottom, rgb(85, 85, 85) 0%, rgb(39, 39, 39) 42%, rgb(11, 11, 11) 96%);\n  \n  display: inline;\n  \n  height: 25px !important;\n  width: 70px !important;\n  \n  vertical-align: 0%;\n  padding: 4.5px 16px 5px 16px;\n  text-align: center;\n  border: 1px solid #555555;\n  /*line-height: 200%;*/\n  border-radius: 4px;\n  \n  margin-right: 3px;\n  margin-left: 0;\n}\n/*\ntd.row2.messaging.gensmall > table > tbody > tr > td.user-is-online::after(2) {\n  content: "meta";\n  display: block;\n}*/\n\n.i_icon_pm, .i_icon_online, [title="Send e-mail"], img[src="http://hitsk.in/t/15/83/39/i_icon_www.png"], td[valign="middle"] > a[href^="https://m.facebook.com/"], td[valign="middle"] > a[href^="https://mobile.twitter.com/"], img[src="http://hitsk.in/t/15/83/39/i_icon_skype.png"], img[src="https://illiweb.com/fa/subsilver/icon_fb.gif"], img[src="https://illiweb.com/fa/subsilver/icon_twitter.gif"], img[src="http://hitsk.in/t/15/83/39/i_icon_aim.png"], img[src="http://hitsk.in/t/15/83/39/i_icon_msnm.png"] {\n  display:none;\n}\n\n[title="Send private message"]:after {\n  color: #eee;\n  content: "PM";\n  font-family: \'Open Sans\', Arial, sans-serif;;\n  \n  /*font-weight: bold;*/\n  letter-spacing: 0px;\n  -webkit-font-smoothing: antialiased;\n  text-shadow: rgba(0,0,0,.01) 0 0 1px;\n  \n  background: -webkit-linear-gradient(top, rgb(85, 85, 85) 0%, rgb(39, 39, 39) 42%, rgb(11, 11, 11) 96%);\n  background: linear-gradient(to bottom, rgb(85, 85, 85) 0%, rgb(39, 39, 39) 42%, rgb(11, 11, 11) 96%);\n  \n  display: inline;\n  \n  height: 25px !important;\n  width: 70px !important;\n  \n  vertical-align: 0%;\n  padding: 4.5px 9.5px 5px 9.5px;\n  text-align: center;\n  border: 1px solid #555555;\n  /*line-height: 200%;*/\n  border-radius: 4px;\n  \n  margin-right: 0;\n  margin-left: 0;\n}\n\n\n[href^="/profile?mode=email&"]:after {\n  color: #eee;\n  content: "EMAIL";\n  font-family: \'Open Sans\', Arial, sans-serif;;\n  \n  /*font-weight: bold;*/\n  letter-spacing: 0px;\n  -webkit-font-smoothing: antialiased;\n  text-shadow: rgba(0,0,0,.01) 0 0 1px;\n  \n  background: -webkit-linear-gradient(top, rgb(85, 85, 85) 0%, rgb(39, 39, 39) 42%, rgb(11, 11, 11) 96%);\n  background: linear-gradient(to bottom, rgb(85, 85, 85) 0%, rgb(39, 39, 39) 42%, rgb(11, 11, 11) 96%);\n  \n  display: inline;\n  \n  height: 25px !important;\n  width: 70px !important;\n  \n  vertical-align: 0%;\n  padding: 4.5px 8.5px 5px 8.5px;\n  text-align: center;\n  border: 1px solid #555555;\n  /*line-height: 200%;*/\n  border-radius: 4px;\n  \n  margin-right: 0;\n  margin-left: 0;\n}\n\n\n[title="Visit poster\'s website"]:after {\n  color: #eee;\n  content: "WEBSITE";\n  font-family: \'Open Sans\', Arial, sans-serif;;\n  \n  /*font-weight: bold;*/\n  letter-spacing: 0px;\n  -webkit-font-smoothing: antialiased;\n  text-shadow: rgba(0,0,0,.01) 0 0 1px;\n  \n  background: -webkit-linear-gradient(top, rgb(85, 85, 85) 0%, rgb(39, 39, 39) 42%, rgb(11, 11, 11) 96%);\n  background: linear-gradient(to bottom, rgb(85, 85, 85) 0%, rgb(39, 39, 39) 42%, rgb(11, 11, 11) 96%);\n  \n  display: inline;\n  \n  height: 25px !important;\n  width: 70px !important;\n  \n  vertical-align: 0%;\n  padding: 4.5px 8.5px 5px 8.5px;\n  text-align: center;\n  border: 1px solid #555555;\n  /*line-height: 200%;*/\n  border-radius: 4px;\n  \n  margin-right: 0;\n  margin-left: 0;\n}\n\na[href^="skype:"]:after {\n  color: #eee;\n  content: "SKYPE";\n  font-family: \'Open Sans\', Arial, sans-serif;;\n  \n  /*font-weight: bold;*/\n  letter-spacing: 0px;\n  -webkit-font-smoothing: antialiased;\n  text-shadow: rgba(0,0,0,.01) 0 0 1px;\n  \n  background: -webkit-linear-gradient(top, rgb(85, 85, 85) 0%, rgb(39, 39, 39) 42%, rgb(11, 11, 11) 96%);\n  background: linear-gradient(to bottom, rgb(85, 85, 85) 0%, rgb(39, 39, 39) 42%, rgb(11, 11, 11) 96%);\n  \n  display: inline;\n  \n  height: 25px !important;\n  width: 70px !important;\n  \n  vertical-align: 0%;\n  padding: 4.5px 8.5px 5px 8.5px;\n  text-align: center;\n  border: 1px solid #555555;\n  /*line-height: 200%;*/\n  border-radius: 4px;\n  \n  margin-right: 0;\n  margin-left: 0;\n}\n\n\ntd > a[href^="https://www.facebook.com/"]:after {\n  color: #eee;\n  content: "FACEBOOK";\n  font-family: \'Open Sans\', Arial, sans-serif;;\n  \n  /*font-weight: bold;*/\n  letter-spacing: 0px;\n  -webkit-font-smoothing: antialiased;\n  text-shadow: rgba(0,0,0,.01) 0 0 1px;\n  \n  background: -webkit-linear-gradient(top, rgb(85, 85, 85) 0%, rgb(39, 39, 39) 42%, rgb(11, 11, 11) 96%);\n  background: linear-gradient(to bottom, rgb(85, 85, 85) 0%, rgb(39, 39, 39) 42%, rgb(11, 11, 11) 96%);\n  \n  display: inline;\n  \n  height: 25px !important;\n  width: 70px !important;\n  \n  vertical-align: 0%;\n  padding: 4.5px 8.5px 5px 8.5px;\n  text-align: center;\n  border: 1px solid #555555;\n  /*line-height: 200%;*/\n  border-radius: 4px;\n  \n  margin-right: 0;\n  margin-left: 0;\n}\n\ntd > a[href^="https://twitter.com/"]:after {\n  color: #eee;\n  content: "TWITTER";\n  font-family: \'Open Sans\', Arial, sans-serif;;\n  \n  /*font-weight: bold;*/\n  letter-spacing: 0px;\n  -webkit-font-smoothing: antialiased;\n  text-shadow: rgba(0,0,0,.01) 0 0 1px;\n  \n  background: -webkit-linear-gradient(top, rgb(85, 85, 85) 0%, rgb(39, 39, 39) 42%, rgb(11, 11, 11) 96%);\n  background: linear-gradient(to bottom, rgb(85, 85, 85) 0%, rgb(39, 39, 39) 42%, rgb(11, 11, 11) 96%);\n  \n  display: inline;\n  \n  height: 25px !important;\n  width: 70px !important;\n  \n  vertical-align: 0%;\n  padding: 4.5px 8.5px 5px 8.5px;\n  text-align: center;\n  border: 1px solid #555555;\n  /*line-height: 200%;*/\n  border-radius: 4px;\n  \n  margin-right: 0;\n  margin-left: 0;\n}\n\ntd > a[href^="http://edit.yahoo.com/"]:after {\n  color: #eee;\n  content: "YAHOO";\n  font-family: \'Open Sans\', Arial, sans-serif;;\n  \n  /*font-weight: bold;*/\n  letter-spacing: 0px;\n  -webkit-font-smoothing: antialiased;\n  text-shadow: rgba(0,0,0,.01) 0 0 1px;\n  \n  background: -webkit-linear-gradient(top, rgb(85, 85, 85) 0%, rgb(39, 39, 39) 42%, rgb(11, 11, 11) 96%);\n  background: linear-gradient(to bottom, rgb(85, 85, 85) 0%, rgb(39, 39, 39) 42%, rgb(11, 11, 11) 96%);\n  \n  display: inline;\n  \n  height: 25px !important;\n  width: 70px !important;\n  \n  vertical-align: 0%;\n  padding: 4.5px 8.5px 5px 8.5px;\n  text-align: center;\n  border: 1px solid #555555;\n  /*line-height: 200%;*/\n  border-radius: 4px;\n  \n  margin-right: 0;\n  margin-left: 0;\n}\n\ntd > a[href^="aim:goim?screenname="]:after {\n  color: #eee;\n  content: "AIM";\n  font-family: \'Open Sans\', Arial, sans-serif;;\n  \n  /*font-weight: bold;*/\n  letter-spacing: 0px;\n  -webkit-font-smoothing: antialiased;\n  text-shadow: rgba(0,0,0,.01) 0 0 1px;\n  \n  background: -webkit-linear-gradient(top, rgb(85, 85, 85) 0%, rgb(39, 39, 39) 42%, rgb(11, 11, 11) 96%);\n  background: linear-gradient(to bottom, rgb(85, 85, 85) 0%, rgb(39, 39, 39) 42%, rgb(11, 11, 11) 96%);\n  \n  display: inline;\n  \n  height: 25px !important;\n  width: 70px !important;\n  \n  vertical-align: 0%;\n  padding: 4.5px 8.5px 5px 8.5px;\n  text-align: center;\n  border: 1px solid #555555;\n  /*line-height: 200%;*/\n  border-radius: 4px;\n  \n  margin-right: 0;\n  margin-left: 0;\n}\n\ntd > a[href^="msnim:chat?contact="]:after {\n  color: #eee;\n  content: "MSN";\n  font-family: \'Open Sans\', Arial, sans-serif;;\n  \n  /*font-weight: bold;*/\n  letter-spacing: 0px;\n  -webkit-font-smoothing: antialiased;\n  text-shadow: rgba(0,0,0,.01) 0 0 1px;\n  \n  background: -webkit-linear-gradient(top, rgb(85, 85, 85) 0%, rgb(39, 39, 39) 42%, rgb(11, 11, 11) 96%);\n  background: linear-gradient(to bottom, rgb(85, 85, 85) 0%, rgb(39, 39, 39) 42%, rgb(11, 11, 11) 96%);\n  \n  display: inline;\n  \n  height: 25px !important;\n  width: 70px !important;\n  \n  vertical-align: 0%;\n  padding: 4.5px 8.5px 5px 8.5px;\n  text-align: center;\n  border: 1px solid #555555;\n  /*line-height: 200%;*/\n  border-radius: 4px;\n  \n  margin-right: 0;\n  margin-left: 0;\n}\n\n/*td > a[title="View user profile"]:after {\n  color: #eee;\n  content: "PROFILE";\n  font-family: \'Open Sans\', Arial, sans-serif;;\n  \n  /*font-weight: bold;*//*\n  letter-spacing: 0px;\n  -webkit-font-smoothing: antialiased;\n  text-shadow: rgba(0,0,0,.01) 0 0 1px;\n  \n  background: -webkit-linear-gradient(top, rgb(85, 85, 85) 0%, rgb(39, 39, 39) 42%, rgb(11, 11, 11) 96%);\n  background: linear-gradient(to bottom, rgb(85, 85, 85) 0%, rgb(39, 39, 39) 42%, rgb(11, 11, 11) 96%);\n  \n  display: inline;\n  \n  height: 25px !important;\n  width: 70px !important;\n  \n  vertical-align: 0%;\n  padding: 4.5px 8.5px 5px 8.5px;\n  text-align: center;\n  border: 1px solid #555555;\n  /*line-height: 200%;*//*\n  border-radius: 4px;\n  \n  margin-right: 0;\n  margin-left: 0;\n}*/\n\ntd > a[href^="http://www.icq.com/people/"]:after {\n  color: #eee;\n  content: "ICQ";\n  font-family: \'Open Sans\', Arial, sans-serif;;\n  \n  /*font-weight: bold;*/\n  letter-spacing: 0px;\n  -webkit-font-smoothing: antialiased;\n  text-shadow: rgba(0,0,0,.01) 0 0 1px;\n  \n  background: -webkit-linear-gradient(top, rgb(85, 85, 85) 0%, rgb(39, 39, 39) 42%, rgb(11, 11, 11) 96%);\n  background: linear-gradient(to bottom, rgb(85, 85, 85) 0%, rgb(39, 39, 39) 42%, rgb(11, 11, 11) 96%);\n  \n  display: inline;\n  \n  height: 25px !important;\n  width: 70px !important;\n  \n  vertical-align: 0%;\n  padding: 4.5px 8.5px 5px 8.5px;\n  text-align: center;\n  border: 1px solid #555555;\n  /*line-height: 200%;*/\n  border-radius: 4px;\n  \n  margin-right: 0;\n  margin-left: 0;\n}\n\ntd > a[href^="https://pinterest.com/"]:after {\n  color: #eee;\n  content: "PINTEREST";\n  font-family: \'Open Sans\', Arial, sans-serif;;\n  \n  /*font-weight: bold;*/\n  letter-spacing: 0px;\n  -webkit-font-smoothing: antialiased;\n  text-shadow: rgba(0,0,0,.01) 0 0 1px;\n  \n  background: -webkit-linear-gradient(top, rgb(85, 85, 85) 0%, rgb(39, 39, 39) 42%, rgb(11, 11, 11) 96%);\n  background: linear-gradient(to bottom, rgb(85, 85, 85) 0%, rgb(39, 39, 39) 42%, rgb(11, 11, 11) 96%);\n  \n  display: inline;\n  \n  height: 25px !important;\n  width: 70px !important;\n  \n  vertical-align: 0%;\n  padding: 4.5px 8.5px 5px 8.5px;\n  text-align: center;\n  border: 1px solid #555555;\n  /*line-height: 200%;*/\n  border-radius: 4px;\n  \n  margin-right: 0;\n  margin-left: 0;\n}\n\n');
var n=void 0;function p(){var b=n.w(),b=(window.f?window.f.K:swearifyLite)(b);return b.replace(/\[cd\]([^]+?)\[\/cd\]/g,"[code]$1[/code]").replace(/`([^]+?)`/g,"[code]Inline: $1[/code]").replace(/\[gist\]([^]+?)\[\/gist\]/g,"[url]http://fallk.github.io/nfmm-addons/embed.html?loc=$1[/url]")}
if(document.getElementById("text_editor_textarea")){var q=document.querySelector(".liteoption[name=preview]");q&&q.addEventListener("click",function(){n.j(p());console.log("clicked!!!")});var r=document.querySelector(".mainoption[name=post]");r&&r.addEventListener("click",function(){n.j(p());console.log("clicked!!!")});console.log(!!unsafeWindow.a.b,!!unsafeWindow.g,!!unsafeWindow.a,!!window.a,!!window.a.b,!!window.g);unsafeWindow.a.b=exportFunction(function(){},unsafeWindow.a);var t=document.getElementById("text_editor_textarea");
if(t){var u;u=t.value.replace(/\[code]Inline: (.*?)\[\/code]/g,"`$1`").replace(/\[(\/)?code]/g,"[$1cd]").replace(/\[url]http:\/\/fallk\.github\.io\/nfmm-addons\/embed\.html?loc=(.*?)\[\/url]/g,"[gist]$1[/gist]");t.value=u;n=CodeMirror.s(t,{mode:"bbcodemixed",L:2,B:2,C:!1,D:!0,F:!0,I:"native",autofocus:!1});n.J(700,250);if(document.getElementById("text_editor_controls"))document.getElementById("format-buttons").appendChild(m());else{var v=document.getElementById("text_editor_textarea");v&&(v=v.parentElement,
v.insertBefore(m(),v.firstChild))}}else console.log("org is "+t)}for(var w=document.getElementsByClassName("post-options"),x=0,ba=w.length;x<ba;x++){var y=w[x].querySelector("img").id,y=y.substring(y.lastIndexOf("_")+1);$(w[x]).G('<a href="'+document.location.origin+document.location.pathname+"#"+y+'">Link to this post</a>')}
function ca(b){var e=b.getElementById("profile-advanced-details"),c="";try{var d=b.querySelectorAll(".genmed.module-title")[0].textContent.trim().replace(/ \(online\)/,""),c="Username history: "+(usernameHistory[d]||d)+"<br>"}catch(l){c="Username history: "+l+"<br>"}Array.slice(e.children).forEach(function(b){"DL"==b.tagName&&(c+=b.children[0].textContent+b.children[1].textContent+"\n")});return c.replace(/Male.*$/m,(b.querySelector(".ajax-profil_parent > .field_uneditable > img")||{alt:"Unknown"}).alt).replace(/\*/g,
"").replace(/\s*:\s*/gm,": ").replace(/Birthday: (....-..-..).*$/m,"Birthday: $1").trim().replace(/\n/g,"<br>").replace(/([A-Za-z \/]+): ([A-Za-z \/]+): /g,"$1: -<br>$2: ").replace(/([A-Za-z \/]+): ([A-Za-z \/]+): /g,"$1: -<br>$2: ")}var z=-1,A=null,B=null;
function C(b,e,c,d){return function(){B&&(clearTimeout(B),B=null);B=setTimeout(function(){z===e&&A?(b.c(A),b.show()):(b.c("Loading..."),b.show(),$.get(c,function(c){c=(new DOMParser).parseFromString(c,"text/html");c=d(c);b.c(c);A=c;z=e;console.log("Load was performed.")}))},1E3)}}function D(b){return function(){B&&(clearTimeout(B),B=null);b.h()}}function E(b){return function(){B&&(clearTimeout(B),B=null);b.h()}}
for(var F=document.querySelectorAll('a[href^="/u"]'),G=0,H=F.length;G<H;G++){var da=G,I=F[G],J=new Opentip(I,{l:null,i:"mouseleave",style:"dark"});I.addEventListener("mouseover",C(J,da,I.href,ca));I.addEventListener("mouseleave",D(J));I.addEventListener("mouseout",E(J))}
function ea(b){b=b.querySelector("tr.post > td:nth-child(2) > table:nth-child(1) > tbody:nth-child(1) > tr:nth-child(3) > td:nth-child(1) > div:nth-child(1) > div:nth-child(1)");if(null===b)return"(N/A)";b=b.textContent;return 500>b.length?b:b.substr(0,500)}
for(var K=document.querySelectorAll("a.topictitle"),L=0,H=K.length;L<H;L++){var fa=L+F.length,M=K[L],N=new Opentip(M,{l:null,i:"mouseleave",style:"dark"});M.addEventListener("mouseover",C(N,fa,M.href,ea));M.addEventListener("mouseleave",D(N));M.addEventListener("mouseout",E(N))}var O=document.querySelectorAll(".codebox:not(.spoiler)");
function ga(b){return b.replace(/\&lt;/g,"<").replace(/\&gt;/g,">").replace(/\&nbsp;/g,"").replace(/\&amp;/g,"&").replace(/<br>/g,"\r\n").replace(/<span class=\"token [a-z]+\"( spellcheck=\"true\")?>/g,"").replace(/<\/span>/g,"")}
for(var P={content:void 0},Q=0,H=O.length;Q<H;P={content:P.content},Q++){var R=O[Q].children[0];if("A"!=R.firstChild.firstChild.firstChild.tagName&&(P.content=O[Q].children[1].children[0],P.content)){var S=document.createElement("a");S.appendChild(document.createTextNode(" Select All"));S.setAttribute("class","genmed hansenAnc");S.addEventListener("click",function(b){return function(){var e=b.content;if(document.selection){var c=document.body.createTextRange();c.moveToElementText(e);c.select()}else window.getSelection&&
(c=document.createRange(),c.selectNode(e),window.getSelection().addRange(c))}}(P));R.appendChild(S);var T=document.createElement("a");T.appendChild(document.createTextNode(" Copy"));T.setAttribute("class","genmed hansenAnc");T.addEventListener("click",function(b){return function(){try{GM_setClipboard(ga(b.content.innerHTML))}catch(e){GM_setClipboard(b.content.textContent)}}}(P));R.appendChild(T)}}
function ha(){try{for(var b=document.getElementsByClassName("cont_code"),e=0,c=b.length;e<c;e++){var d=b[e];if(!d){console.log("undef:"+e);setTimeout(ha,200);break}d.childNodes[0].nodeValue.startsWith("Inline: ")&&(d.setAttribute("class","cont_code inline-code"),d.parentNode.setAttribute("class","code inline-code"),d.parentNode.parentNode.setAttribute("class","codebox inline-code"),d.parentNode.parentNode.firstChild.setAttribute("class","invisible"),d.childNodes[0].nodeValue=d.childNodes[0].nodeValue.substring(8));
d.innerHTML=Prism.A(ga(d.innerHTML),Prism.languages.java)}}catch(l){console.error(l),console.error(l.toString())}}window.addEventListener("load",function(){ha()},!1);
for(var U=document.querySelectorAll(".postbody > div > img"),V=0,H=U.length;V<H;V++)if(0<U[V].clientWidth&&U[V].naturalWidth!==U[V].clientWidth&&1321<U[V].naturalWidth){var W=document.createElement("a");W.setAttribute("class","h-fitimg");W.setAttribute("href",U[V].src);W.appendChild(document.createTextNode("Image scaled to fit screen. Click to show original size..."));U[V].parentElement.insertBefore(W,U[V])}
for(var X=document.querySelectorAll('a[href*="/http"]'),Y=0,H=X.length;Y<H;Y++){var ia=X[Y].href.substring(X[Y].href.indexOf("/http")+1);X[Y].setAttribute("href",ia);X[Y].textContent=ia}for(var ja=document.getElementsByClassName("i_icon_online"),Z=0,H=ja.length;Z<H;Z++)ja[Z].parentElement.setAttribute("class","user-is-online");