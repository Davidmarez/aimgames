// ==UserScript==
// @name        YouTube Improvements
// @description Make your youtube experience (slightly) less cancerous.
// @namespace   notareal@em.ail
// @include     https://www.youtube.com/feed/subscriptions/
// @include     http://www.youtube.com/feed/subscriptions/
// @include     https://www.youtube.com/watch*
// @include     http://www.youtube.com/watch*
// @version     1.19
// @grant       GM_addStyle
// @grant       GM_setValue
// @grant       GM_getValue
// @grant       GM_info
// @grant       GM_listValues
// @license     MIT License (Expat); opensource.org/licenses/MIT
// ==/UserScript==
'use strict';var e=this,Symbol;function f(){e.Symbol||(Symbol=h);f=function(){}}var k=0;function h(a){return"jscomp_symbol_"+a+k++}function l(){f();Symbol.iterator||(Symbol.iterator=Symbol("iterator"));l=function(){}}
function m(){var a=document.querySelectorAll(".stat.view-count");l();if(a[Symbol.iterator])return a[Symbol.iterator]();if(!(a instanceof Array||"string"==typeof a||a instanceof String))throw new TypeError(a+" is not iterable");var b=0;return{next:function(){return b==a.length?{done:!0}:{done:!1,value:a[b++]}}}}
var n="bit.ly;goo.gl;dl.dropbox.com/s/;disq.us;adf.ly;my channel;turn subtitles;cyka blyat;insert obligatory ;\ud83c\udd7e;\ud83c\udd70;1051541451431641621571721571511441234567881234567812345678123678326470547;i'm early;im early;i'm so early;this early;notification;1 like;1 sub;1 comment;dislike;let's do the alphabet;lets do the alphabet;likes for no reason;like and in ;can i get likes".split(";"),p=[/\b\d view\b/i,/first$/i,/frist$/i,/[0-9]+ likes and ([0-9]+|no|zero) views/i,/under [0-9]+ (club|views)/i,
/^[A-Za-z]$/,/\b[Xx]D+\b/,/\bfat\b/i,/\bkys\b/i,/^I have a request/,/^like if/i];if(!document.location.href.startsWith("https://www.youtube.com/feed/subscriptions/")){for(var q=m(),r=q.next();!r.done;r=q.next()){var t=r.value;(t.textContent.startsWith("Recommended")||t.textContent.startsWith("Recomendado"))&&t.parentNode.parentNode.parentNode.parentNode.removeChild(t.parentNode.parentNode.parentNode)}GM_addStyle('.comment-renderer-text-content > b {\n      font-weight: bold;\n  }\n  /*space after comma for tags*/\n  .watch-meta-item .watch-info-tag-list li::after {\n      content: ", ";\n  }')}
var u=[/\sA\s/g,/\sAn\s/g,/\sThe\s/g,/\sAnd\s/g,/\sBut\s/g,/\sOr\s/g,/\sFor\s/g,/\sNor\s/g,/\sAs\s/g,/\sAt\s/g,/\sBy\s/g,/\sFor\s/g,/\sFrom\s/g,/\sIn\s/g,/\sInto\s/g,/\sNear\s/g,/\sOf\s/g,/\sOn\s/g,/\sOnto\s/g,/\sTo\s/g,/\sWith\s/g],v="a an the and but or for nor as at by for from in into near of on onto to with".split(" "),w=u.length,x=["ID","TV"];
function y(a){a=a.replace(/([^\W_]+[^\s-]*) */g,function(a){return-1!=x.indexOf(a)?a:a[0].toUpperCase()+a.substr(1).toLowerCase()});for(var b=0;b<w;b++)a=a.replace(u[b]," "+v[b]+" ");return a}
function z(a){var b=window.location.href,c=b.indexOf("&"),b=b.substring(b.indexOf("/watch?v="),-1==c?b.length:c);1>=a.currentTime&&(a.currentTime=GM_getValue(b+"_progress",0));GM_setValue(b+"_duration",a.duration);window.addEventListener("beforeunload",function(){GM_setValue(b+"_progress",a.currentTime);GM_setValue(b+"_duration",a.duration)})}var A=document.getElementById("yt-masthead-notifications-button");
null!==A&&A.addEventListener("click",function(a){a.preventDefault();alert(JSON.stringify(GM_info,null,2)+"\n"+JSON.stringify(GM_listValues(),null,2))});GM_addStyle("\n@keyframes cccnodeInserted {  \n    from {  \n        outline-color: #fff; \n    }\n    to {  \n        outline-color: #000;\n    }  \n}\n\n.comment-renderer-text {\n    animation-duration: 0.01s;\n    animation-name: cccnodeInserted;\n}\n\n@keyframes cccvideoTitle {  \n    from {  \n        outline-color: #fff; \n    }\n    to {  \n        outline-color: #000;\n    }  \n}\n\n.yt-lockup-title > a {\n    animation-duration: 0.01s;\n    animation-name: cccvideoTitle;\n}\n\n@keyframes cccvideoThumbnail {  \n    from {  \n        outline-color: #fff; \n    }\n    to {  \n        outline-color: #000;\n    }  \n}\n\n.thumb-wrapper {\n    animation-duration: 0.01s;\n    animation-name: cccvideoThumbnail;\n}\n\n@keyframes cccvideoElement {  \n    from {  \n        outline-color: #fff; \n    }\n    to {  \n        outline-color: #000;\n    }  \n}\n\nvideo {\n    animation-duration: 0.01s;\n    animation-name: cccvideoElement;\n}\n\n/*replaces the 'WATCHED' video thing*/\n.hansen-resume-playback-progress-bar {\n  background-color: rgb(230, 33, 23);\n  bottom: 0px;\n  font-family: Roboto,arial,sans-serif;\n  font-size: 13px;\n  height: 4px;\n  left: 0px;\n  line-height: 16.1px;\n  list-style-type: none;\n  overflow-wrap: break-word;\n  perspective-origin: 84px 2px;\n  position: absolute;\n  right: 0px;\n  text-align: left;\n  top: 90px;\n  transform-origin: 84px 2px;\n  width: 168px;\n  -moz-column-gap: 13px;\n}\n\n.hansen-resume-playback-background {\n  background-color: rgb(238, 238, 238);\n  bottom: 0px;\n  font-family: Roboto,arial,sans-serif;\n  font-size: 13px;\n  height: 4px;\n  left: 0px;\n  line-height: 16.1px;\n  list-style-type: none;\n  opacity: 0.6;\n  overflow-wrap: break-word;\n  perspective-origin: 84px 2px;\n  position: absolute;\n  right: 0px;\n  text-align: left;\n  top: 90px;\n  transform-origin: 84px 2px;\n  width: 168px;\n  -moz-column-gap: 13px;\n}\n\n.resume-playback-background, .resume-playback-progress-bar { display:none !important; }\n");
document.addEventListener("animationstart",function(a){if("cccnodeInserted"==a.animationName){var b=a.target;a=b.children[0].textContent;var c;a:{c=a.toLowerCase();for(var d=0;d<n.length;d++)if(-1<c.indexOf(n[d])){c=!0;break a}for(c=0;c<p.length;c++)if(p[c].test(a)){c=!0;break a}c=a.toUpperCase()===a&&/[A-Z]/.test(a)?!0:!1}if(c){c=b.parentElement.parentElement.parentElement;if(c.parentElement.parentElement.className.startsWith("comment-replies-renderer")||c.className.startsWith("comment-replies-renderer"))c=
b.parentElement.parentElement;for(;c.firstChild;)c.removeChild(c.firstChild);b=document.createElement("span");b.setAttribute("style","color: rgb(170, 170, 170);");b.title=a;a=document.createElement("i");a.textContent="Comment removed. Be proud!";b.appendChild(a);c.appendChild(b)}}else if("cccvideoTitle"==a.animationName)a=a.target,a.textContent.toUpperCase()===a.textContent&&(a.textContent=y(a.textContent));else if("cccvideoThumbnail"==a.animationName){if(a=a.target,c=a.children[0].href,b=GM_getValue(c+
"_progress"),c=GM_getValue(c+"_duration"),b&&c){d=document.createElement("span");d.setAttribute("class","hansen-resume-playback-background");var g=document.createElement("span");g.setAttribute("class","hansen-resume-playback-progress-bar");g.setAttribute("style","width:"+Math.floor(b/c*100)+"%;");a.a(a.children[2],d);a.a(a.children[2],g)}}else"cccvideoElement"==a.animationName&&z(a.target)},!0);