function resetLabel(){document.getElementsByClassName("objectinteractionpanel")[0].getElementsByTagName("label")[0].innerHTML="rate everything",document.getElementsByClassName("objectinteractionpanel")[0].getElementsByTagName("label")[0].style.cssText=cssLabel}function album_page_rate(a){rate_album(),rate_tracks(a)}function artist_page_rate(a,b){rate_albums(b),rate_tracks(a),rate_band()}function chart_page_rate(a){rate_albums(a),rate_chart()}function track_page_rate(){rate_track()}function rate_tracks(a){for(var b=0;a>b;b++){var c=document.getElementsByClassName("tracks")[0].getElementsByTagName("tbody")[0].getElementsByTagName("tr")[b].getElementsByClassName("user")[0].getAttribute("id"),d=c.split("_");c=d[2];var e="track",f=rating.toString();createRequest();var g="AJAXRate.php?oid="+c+"&o="+e+"&r="+f;request.open("GET",g,!0),request.onreadystatechange=updatePage,request.send(null)}}function rate_track(){var a=document.getElementsByClassName("objectinteractionpanel")[0].getElementsByTagName("ul")[0].getAttribute("id"),b=a.split("_");a=b[2];var c="track",d=rating.toString();createRequest();var e="AJAXRate.php?oid="+a+"&o="+c+"&r="+d;request.open("GET",e,!0),request.onreadystatechange=updatePage,request.send(null)}function rate_albums(a){for(var b=0;a>b;b++){var c=document.getElementsByClassName("chart")[0].getElementsByClassName("user")[b].getAttribute("id"),d=c.split("_");c=d[2];var e="album",f=rating.toString();createRequest();var g="AJAXRate.php?oid="+c+"&o="+e+"&r="+f;request.open("GET",g,!0),request.onreadystatechange=updatePage,request.send(null)}}function rate_album(){var a=document.getElementsByClassName("objectinteractionpanel")[0].getElementsByTagName("ul")[0].getAttribute("id"),b=a.split("_");a=b[2];var c="album",d=rating.toString();createRequest();var e="AJAXRate.php?oid="+a+"&o="+c+"&r="+d;request.open("GET",e,!0),request.onreadystatechange=updatePage,request.send(null)}function rate_chart(){var a=document.getElementsByClassName("objectinteractionpanel")[0].getElementsByTagName("ul")[0].getAttribute("id"),b=a.split("_");a=b[2];var c="chart",d=rating.toString();createRequest();var e="AJAXRate.php?oid="+a+"&o="+c+"&r="+d;request.open("GET",e,!0),request.onreadystatechange=updatePage,request.send(null)}function rate_band(){var a=document.getElementsByClassName("objectinteractionpanel")[0].getElementsByTagName("ul")[0].getAttribute("id"),b=a.split("_");a=b[2];var c="band",d=rating.toString();createRequest();var e="AJAXRate.php?oid="+a+"&o="+c+"&r="+d;request.open("GET",e,!0),request.onreadystatechange=updatePage,request.send(null)}var cssLabel="font-size: 9px;",album_page=!1,artist_page=!1,track_page=!1,chart_page=!1,track_num=0,album_num=0,rating=-1;window.addEventListener("load",function(){var a=window.location.href;a=a.substr(a.lastIndexOf("?")+1,1),"a"===a?(album_page=!0,track_num=document.getElementsByClassName("tracks")[0].getElementsByTagName("tbody")[0].getElementsByTagName("tr").length):"b"===a?(artist_page=!0,track_num=document.getElementsByClassName("tracks")[0].getElementsByTagName("tbody")[0].getElementsByTagName("tr").length,album_num=document.getElementsByClassName("chart")[0].getElementsByClassName("user").length):"c"===a?(chart_page=!0,album_num=document.getElementsByClassName("chart")[0].getElementsByClassName("user").length):"t"===a&&(track_page=!0);var b=document.getElementsByClassName("objectinteractionpanel")[0],c=b.children,d=c[0].children,e=document.createElement("td"),f=document.createElement("label"),g=document.createElement("input"),h=document.createElement("input");g.setAttribute("type","button"),g.setAttribute("value","Rate-Bot"),h.setAttribute("id","rate-amount"),h.setAttribute("type","text"),h.setAttribute("value","100"),h.setAttribute("maxlength","3"),h.addEventListener("focus",function(){resetLabel()},!0),f.innerHTML="rate everything",d[0].appendChild(e);var i=d[0].getElementsByTagName("td")[0];i.appendChild(f).style.cssText=cssLabel,i.appendChild(h).style.cssText="width:20px;font-size:10px;",i.appendChild(g).addEventListener("click",function(){rating=document.getElementsByClassName("objectinteractionpanel")[0].getElementsByTagName("input")[0].value,100>=rating?(album_page&&album_page_rate(track_num),artist_page&&artist_page_rate(track_num,album_num),chart_page&&chart_page_rate(album_num),track_page&&track_page_rate()):(f.innerHTML="must be <= 100",f.style.cssText+="color:red;")})},!1);