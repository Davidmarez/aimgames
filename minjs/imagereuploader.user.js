function initMenu(a){var b=a.target,c=document.querySelector("#userscript-search-by-image menuitem");"img"==b.localName?(body.setAttribute("contextmenu","userscript-search-by-image"),c.setAttribute("imageURL",b.src)):(body.removeAttribute("contextmenu"),c.removeAttribute("imageURL"))}function copyToClipboard(a){window.prompt("Direct Link",a)}function fileTypeLength(a){return a.length-a.lastIndexOf(".")}function uploadImage(a){var b=a.target.getAttribute("imageURL"),c=new XMLHttpRequest,d=(document.querySelector(".status"),new FormData);d.append("image",b),c.open("POST","https://api.imgur.com/3/image"),c.setRequestHeader("Authorization","Client-ID d8b88dd7493540b"),c.onreadystatechange=function(){if(200===c.status&&4===c.readyState){var a=JSON.parse(c.responseText),b=a.data.link,d=b.slice(0,b.length-fileTypeLength(b))+"s"+b.slice(b.length-fileTypeLength(b));copyToClipboard(d)}},c.send(d)}var body=document.body;body.addEventListener("contextmenu",initMenu,!1);var menu=document.createElement("menu");menu.id="userscript-search-by-image",menu.type="context";var menuitem=document.createElement("menuitem");menuitem.label="Resize and Upload",menuitem.icon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAK6wAACusBgosNWgAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAElSURBVDiNY/z//z8DJYCRkIKsthv/kRX9Z2BgmFalARdiIcaGKZXqcH5O+01U+ay2G3MYGBiSiXUmmofnsBDSjEUTMkiBe2Eq1JnZ7TcZBHhZGNythBl0lLkZODmYGX7++sdw/sZnhl3H3zF8+voHwwsYFkR5ijNICLMzTF31hOHnr38MHGxMDJlhMgwv3vxkWL7jJYpaJmzu0lTigWtmYGBg+PHrH8P0VU8YtJV5MNRiNYCfmxmuGQZ+/PrHwMmOqRyrAX///WfgYEOV4mBjwjAUpwHHL31iyA6XgRvCwcbEkBUmw3DuxmcMtVgDkYONicHLVoTBSJOXgYONieHHz38Ml+98Ydh88DXDtx//CBtACmBiYGCYS4H+OYyU5kasgUgKAADN8WLFzlj9rgAAAABJRU5ErkJggg==",menu.appendChild(menuitem),body.appendChild(menu),document.querySelector("#userscript-search-by-image menuitem").addEventListener("click",uploadImage,!1);